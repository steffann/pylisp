#!/usr/bin/env python
'''
Created on 14 jan. 2013

@author: sander
'''


from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from pylisp.packet.lisp.control.base import LISPControlMessage


class LISPControlPacketHandler(DatagramProtocol):

    def datagramReceived(self, data, (host, port)):
        msg = LISPControlMessage.from_bytes(data)
        print "received %r from %s:%d" % (msg, host, port)


if __name__ == '__main__':

    reactor.listenUDP(4342, LISPControlPacketHandler())
    reactor.run()
